$(window).load(function(){$(".se-pre-con").fadeOut("slow")});var FILTER_MIN="account-basic",FILTER_FULL="account-full",MAX_POST_RETURNS=8;$=jQuery;var $document=$(document),is_online=window.navigator.onLine,htaccess=$.trim($("#htaccess").val()),$btnExportExcel=$("#btnExport"),$loadingContainer=$(".progress-bar"),totalRequestUrl=0,currentMasterIndex=1,currentMasterProgress=0,logInfo=!0,isFilter=!1;htaccess=$.trim($("#is_htaccess_enable").val());
var is_chart_created=!1,navBarForm=$(".form-inline"),booClose=$(".close"),keyContainer=["#digitaslbi"],currentIndex=0,$account_filters=".account-filters",chkOpt=$("input[id='info-toggle']").val(),instagramSessionInput=$("#insta-session-id-val"),instaCookieName="insta-sess-cookie",instagramSessionCookie=Cookies.get(instaCookieName),_log=function(d){console.log(d)},Config={session_key:instaCookieName,action:"account",infoFullMin:chkOpt,urlRequest:"includes/AjaxServices.php",userAgentStatus:is_online,
btnSearch:"#btnSearch",txtSearch:"#txtSearch",queryFormTemplate:"#query-form-template",accountThumbPopup:"#account-thumbs",searchFormContainer:"#search-form-section",searchFormChartContainer:"#search-form-chart-section",lblCountSearchAccounts:"#CountSearchAccounts .badge.badge-pill",lblCountSearchHashtags:"#CountSearchHashtags .badge.badge-pill",lblSumOfVideoViews:"#SumOfVideoViews .badge.badge-pill",lblSumOfTotalLikes:"#SumOfTotalLikes .badge.badge-pill",lblSumOfTotalComments:"#SumOfTotalComments .badge.badge-pill",
lblSumOfTotalShare:"#SumOfTotalShare .badge.badge-pill",lblSumOfTotalPosts:"#SumOfTotalPosts .badge.badge-pill",chartTemplate:"#chart-template",offlineMsg:"WARNING, you are offline or internet connection lost.",sessionError:"No valid session found, Please set a valid session to search @account else search will continue with #hashtag only.",queryAccounts:1,queryHashtags:1,queryLikes:1,queryComments:1,queryKeywords:1,queryPosts:1,getItem:function(d){return this[d].toString()?this[d].toString():!1},
setItem:function(d,e){this[d].toString()&&(this[d]=e)}};$document.on("click",$account_filters,function(){$($account_filters).removeClass("active");$(this).addClass("active");$("input[id='info-toggle']").val($(this).data("val"));Config.setItem("infoFullMin",$(this).data("val"));console.info($(this).data("val"))});var _l=function(d){};function hasProp(d,e){return void 0!==d?Object.prototype.hasOwnProperty.call(d,e):!1}function isJSONString(d){try{JSON.parse(d)}catch(e){return!1}return!0}var log=document.querySelector("#log");
["log","warn","error"].forEach(function(d){console[d]=function(d,a,f){return function(e){d(e);isJSONString(e)&&(e=JSON.stringify(e,void 0,2));var g=document.createElement("pre");g.classList.add(a);g.textContent=a+": "+e;f.appendChild(g)}}(console[d].bind(console),d,log)});
$(document).ajaxError(function(d,e,a,f){errStr="";errStr+='<div class="console.info console.info-danger console.info-dismissable">';errStr+='  <a href="#" class="close" data-dismiss="console.info" aria-label="close">&times;</a>';errStr+="  <strong>OOPS error occured: </strong> Something went wrong or info not available.";errStr+="</div>";$(".error-handling .container-fluid").html(errStr).parent().removeClass("hide")});var stateProgress=function(){};
function fnExcelReport(d){d=document.getElementById(d);var e="<table border='2px'>";for(j=0;1>j;j++)e+="<tr bgcolor='#87AFC6'>"+d.rows[j].innerHTML+"</tr>";for(j=1;j<d.rows.length;j++)e+="<tr>"+d.rows[j].innerHTML+"</tr>";e=(e+"</table>").replace(/<A[^>]*>|<\/A>/g,"");e=e.replace(/<img[^>]*>/gi,"");e=e.replace(/<input[^>]*>|<\/input>/gi,"");return"data:application/vnd.ms-excel, "+encodeURIComponent(e)}
var InstagramAccountSearch=function(){this.stateError=!1;this.txtProgressState=0;this.info=[];this.urlInstagram="https://www.instagram.com";this.InstaJSON=this.urlInstagramNext=null;this.currentIndexPost=this.currentIndex=0;this.isSearchingForNext=!1;this.errorContainer=$(".user-error");this.infoContainer=$(".user-info");this.tableWrapper=$("#search-account-table");this.tableContentWrapper=$("#search-account-table.table-striped tbody");this.txtIndicator=$(".txt-progress");this.sendRequestUrl=Config.getItem("urlRequest");
this.infoFullMin=Config.getItem("infoFullMin")};console.info(Config.getItem("infoFullMin"));
InstagramAccountSearch.prototype.setAccount=function(){this.info=[];this.info.Biography=this.InstaJSON.graphql.user.biography;this.info.UserName=this.InstaJSON.graphql.user.username;this.info.FullName=this.InstaJSON.graphql.user.full_name;this.info.user_id=this.InstaJSON.graphql.user.id;this.info.Posts=this.InstaJSON.graphql.user.edge_owner_to_timeline_media.count;this.info.Followers=this.InstaJSON.graphql.user.edge_followed_by.count;this.info.Following=this.InstaJSON.graphql.user.edge_follow.count;
this.info.AccountHref=this.urlInstagram+"/"+this.InstaJSON.graphql.user.username;this.info.Thumbs=[]};
InstagramAccountSearch.prototype.buildAccountTableSummary=function(){var d=this,e=Math.ceil(this.info.Posts/MAX_POST_RETURNS);console.info(this.currentIndexPost+" - "+e);this.eventHandler("Likes & Comments: "+this.currentIndexPost+"/"+e+", "+this.info.FullName);this.txtProgressState=Math.ceil(100*this.currentIndexPost)/e;if(this.infoFullMin===FILTER_FULL){console.info("Full request access");e=[];var a=[],f=[],g=[],h=0,k=0,b=0,c={};if(hasProp(this.InstaJSON,"graphql")||hasProp(this.InstaJSON,"data")){if(hasProp(this.InstaJSON.graphql,
"user")||hasProp(this.InstaJSON.data,"user")){if(hasProp(this.InstaJSON.graphql,"user"))e=this.InstaJSON.graphql.user.edge_owner_to_timeline_media.edges,c=this.InstaJSON.graphql.user;else if(hasProp(this.InstaJSON.data,"user"))e=this.InstaJSON.data.user.edge_owner_to_timeline_media.edges,c=this.InstaJSON.data.user;else return!1;$.each(e,function(b,c){d.info.Thumbs.push({"thumb-src":c.node.thumbnail_resources[0].src,comments:c.node.edge_media_to_comment.count,likes:c.node.edge_media_preview_like.count});
a.push(c.node.edge_media_preview_like.count);f.push(c.node.edge_media_to_comment.count);g.push(c.node.video_view_count?c.node.video_view_count:0)});$.each(a,function(c,b){h+=parseInt(b)||0});$.each(f,function(c,b){k+=parseInt(b)||0});$.each(g,function(c,a){b+=parseInt(a)||0})}this.isSearchingForNext?(this.info.TotalLikes=parseInt(this.info.TotalLikes)+h,this.info.TotalComments=parseInt(this.info.TotalComments)+k,this.info.TotalViews=parseInt(this.info.TotalViews)+b):(this.info.TotalLikes=h,this.info.TotalComments=
k,this.info.TotalViews=b);!0===c.edge_owner_to_timeline_media.page_info.has_next_page?(this.urlInstagramNext=c.edge_owner_to_timeline_media.page_info.end_cursor,this.currentIndexPost++,this.isSearchingForNext=!0):(this.currentIndexPost=1,this.isSearchingForNext=!1)}}};
InstagramAccountSearch.prototype.buildTableRowsContent=function(){var d='<tr class="info-row"><td><input class="tbl-chk" type="checkbox"></td><td><a target="_blank" href="'+(this.info.AccountHref+'">'+this.info.UserName+"</a></td>");d+="<td>"+this.info.Biography+"</td>";d+="<td>"+this.info.Followers+"</td>";d+="<td>"+this.info.Following+"</td>";d+="<td>"+this.info.Posts+"</td>";d=this.info.TotalLikes?d+('<td><a href="#" data-toggle="modal" data-target="#thumb-'+this.info.UserName+'">'+this.info.TotalLikes+
"</a></td>"):d+"<td>0</td>";d=this.info.TotalComments?d+("<td>"+this.info.TotalComments+"</td>"):d+"<td>0</td>";d=this.info.TotalViews?d+("<td>"+this.info.TotalViews+"</td>"):d+"<td>0</td>";d+='<td><a data-placement="top" data-toggle="tooltip" title="Edit"><button class="btn btn-primary btn-xs" data-title="Edit" data-toggle="modal" data-target="#edit"><span class="glyphicon glyphicon-pencil"></span></button></a> <a data-placement="top" data-toggle="tooltip" title="Delete"><button class="btn btn-danger btn-xs" data-title="Delete" data-toggle="modal" data-target="#delete"><span class="glyphicon glyphicon-trash"></span></button></a></td></tr>';
var e=$(Config.getItem("accountThumbPopup")).html();Mustache.parse(e);rendered=Mustache.render(e,{username:this.info.UserName,"thumb-loop":this.info.Thumbs});this.tableWrapper.after(rendered);return d};InstagramAccountSearch.prototype.errorHandler=function(d){this.errorContainer.html(d)};
InstagramAccountSearch.prototype.eventHandler=function(d,e){"undefined"===typeof e?(this.txtIndicator.eq(this.currentIndex).css({width:this.txtProgressState+"%","border-top":"2px solid green"}),this.infoContainer.eq(this.currentIndex).html(d)):(this.txtIndicator.eq(this.currentIndex).css({width:this.txtProgressState+"%","border-top":"2px solid red"}),this.infoContainer.eq(this.currentIndex).removeClass("label-info").addClass(e).html(d))};
InstagramAccountSearch.prototype.initNow=function(d,e){var a=this,f=e;f||(f={iUrl:d,request_action:"pull_account",sessionid:Config.getItem("session_key")});return $.post(a.sendRequestUrl,f,function(d,h,k){if(window._sharedData&&window._sharedData.error)return a.stateError=!0,a.errorHandler(window._sharedData.error),currentMasterProgress=d=Math.floor(currentMasterIndex/totalRequestUrl*100),stateProgress(),currentMasterIndex++,!1;a.InstaJSON=window._sharedData.entry_data.ProfilePage.shift();a.stateError=
!1;if(a.InstaJSON.graphql)!0===a.InstaJSON.graphql.user.edge_owner_to_timeline_media.page_info.has_next_page&&a.infoFullMin==FILTER_FULL?(console.info("Full request access II"),a.urlInstagramNext=a.InstaJSON.graphql.user.edge_owner_to_timeline_media.page_info.end_cursor,a.currentIndexPost++,a.isSearchingForNext=!0):(a.currentIndexPost=1,a.isSearchingForNext=!1);else if(a.InstaJSON.data&&a.infoFullMin===FILTER_FULL)console.info("Full request access III"),!0===a.InstaJSON.data.user.edge_owner_to_timeline_media.page_info.has_next_page?
(a.urlInstagramNext=a.InstaJSON.data.user.edge_owner_to_timeline_media.page_info.end_cursor,a.currentIndexPost++,a.isSearchingForNext=!0):(a.currentIndexPost=1,a.isSearchingForNext=!1);else return!1;if("pull_account"===f.request_action){if(!0===a.InstaJSON.graphql.user.is_private)return a.eventHandler("This is Private account: "+a.InstaJSON.graphql.user.full_name,"label-danger"),!1;a.setAccount();e={keyword:a.info.user_id,request_action:"pull_media",sessionid:Config.getItem("session_key"),max_id:a.urlInstagramNext};
a.infoFullMin===FILTER_FULL&&(console.info("Full request access IV"),a.initNow(a.info.UserName,e))}else a.buildAccountTableSummary(),!0===a.isSearchingForNext&&a.infoFullMin===FILTER_FULL?(console.info("Full request access V"),e={keyword:a.info.user_id,request_action:"pull_media",max_id:a.urlInstagramNext,sessionid:Config.getItem("session_key")},a.initNow(a.info.UserName,e)):(currentMasterIndex++,d=Math.floor(currentMasterIndex/totalRequestUrl*100),a.isSearchingForNext=!1,a.currentIndexPost=1,a.txtProgressState=
0,a.eventHandler("Likes & Comments Done..."+a.info.FullName,"label-success"),currentMasterProgress=d,stateProgress(),a.tableContentWrapper.append(a.buildTableRowsContent()));a.infoFullMin==FILTER_MIN?(console.info("Min request access VI: "+a.infoFullMin),currentMasterIndex++,d=Math.floor(currentMasterIndex/totalRequestUrl*100),a.isSearchingForNext=!1,a.currentIndexPost=1,a.txtProgressState=0,a.eventHandler("Likes & Comments Done..."+a.info.FullName,"label-success"),currentMasterProgress=d,stateProgress(),
a.tableContentWrapper.append(a.buildTableRowsContent())):(console.info("Requested info type is: "+a.infoFullMin),console.info("Full request access VII"),a.isSearchingForNext=!0)})};
$document.ready(function(){function d(){return"#"+("000000"+(16777215-Math.floor(16777216*Math.random())).toString(16)).substr(-6)}function e(b){var c="chart_"+(new Date).getTime();CanvasJS.addColorSet("customColorSet",[d(),d(),d(),d(),d(),d()]);c=new CanvasJS.Chart(b.chartId,{animationDuration:800,animationEnabled:!0,backgroundColor:"transparent",colorSet:"customColorSet",theme:"theme2",legend:{fontFamily:"calibri",fontSize:14,horizontalAlign:"left",verticalAlign:"center",itemTextFormatter:function(c){return c.dataPoint.name+
": "+c.dataPoint.y}},title:{dockInsidePlotArea:!0,fontSize:20,fontWeight:"normal",horizontalAlign:"center",verticalAlign:"center",text:b.count},toolTip:{cornerRadius:0,fontStyle:"normal"},data:[{innerRadius:"80%",radius:"90%",legendMarkerType:"square",showInLegend:!0,startAngle:90,type:"doughnut",dataPoints:[{y:b.likes,name:"Likes"},{y:b.comments,name:"Comments"},{y:b.keywords,name:"Keywords"},{y:b.videos,name:"Video Views"}]}]});c.render();is_chart_created=!0}$("input[id='info-toggle']").on("change",
function(){chkOpt=$(this).val();Config.setItem("infoFullMin",chkOpt)});$(instagramSessionInput).on("change paste keyup",function(){Cookies.set(instaCookieName,$(this).val())});instagramSessionCookie&&instagramSessionInput.val(instagramSessionCookie);$("[data-toggle=tooltip]").tooltip();(function(b){b.fn.flash=function(c){"undefined"===typeof c?b(".container.preloader").addClass("hide"):b(".container.preloader").removeClass("hide").find(".progress-bar.progress-bar-striped").html(c)}})(jQuery);$(".wow").jQCloud([{text:"#Lovely",
weight:10},{text:"#Good",weight:11},{text:"#Excellent",weight:12},{text:"#Wowmade",weight:13},{text:"#wow",weight:14},{text:"#Philadelphia",weight:15},{text:"#NewDone",weight:16},{text:"#Best",weight:17}],{shape:"elliptic",autoResize:!0,height:350});$(".oh").jQCloud([{text:"#SoBad",weight:21},{text:"#Nope",weight:22},{text:"#DoNotWorks",weight:23},{text:"#Useless",weight:24},{text:"#SoPoor",weight:25},{text:"#AnotherBad",weight:26},{text:"#ServiceOff",weight:27},{text:"#Ban",weight:28}],{colors:["#800026",
"#bd0026","#e31a1c","#fc4e2a","#fd8d3c"],shape:"elliptic",autoResize:!0,height:350});var a=function(){};a.prototype.setOfflineMode=function(){if(!1===this.userAgentStatus){var b=$("#offline-template").html();$(".wrapper").html(b)}};$(document).on("click","a.download",function(){var b=$(this),c=b.data("id");c=fnExcelReport(c);b.attr("download","ExcelExport-"+(new Date).getTime()+".xls").attr("href",c).attr("target","_blank")});var f=$(Config.getItem("txtSearch"));f.typeahead({multiple:!0,source:keyContainer,
autoSelect:!0,minLength:0,items:20,showHintOnFocus:!0,dupChecker:!0});f.change(function(){f.typeahead("getActive")&&f.val()});$document.ajaxStart(function(){$("body").flash("Please wait...request in progress")}).ajaxStop(function(){$("body").flash()});booClose.modal("hide");$("body").tooltip({selector:"[rel=tooltip]",trigger:"hover"});$document.delegate('*[data-toggle="lightbox"]',"click",function(b){b.preventDefault();$(this).ekkoLightbox()});$.sum=function(b){var c=0;$.each(b,function(b,a){c+=a});
return c};var g=function(b){this.filterKeywords=b.filterKeywords;this.keyWordsGroupCountValue=[];this.container=b.container||!1;this.keyword=b.keyword||!1;this.template=b.template||!1;this.callback=b.callback||!1;this.viewData={};this.chartOptions={};this.sumOfTotalViews=b.sumOfTotalViews;this.sumOfTotalLikes=b.sumOfTotalLikes;this.sumOfTotalComments=b.sumOfTotalComments;this.sumOfTotalShare=b.sumOfTotalShare;this.sumOfTotalPosts=b.sumOfTotalPosts;this.caption=this.src="";this.videos=this.comment=
this.like=0;this.name="";this.count=0;this.tblSummery=[];this.keywordSummery=[];this.imgSrcTemplate=[];this.setIndex=0;this.requestUrl=Config.getItem("urlRequest");this.dataJson={};this.isNextOn=!1;this.sumOfComments=this.sumOfPosts=this.sumOfViews=this.sumOfLikes=this.sumOfCount=0;this._self=this;this.nextId=!1;this.maxRequestNo=4;this.requestRecursiveCycle=!0;this.limitRequest=0;this.action=b.action?b.action:"pull_hashtag";return this};g.prototype.initStart=function(){var b=this;return $.post(b.requestUrl,
{keyword:b.keyword,next:b.nextId,request_action:b.action},function(c){if("undefined"===typeof window._sharedData||window._sharedData.hasOwnProperty("error"))return!1;c=window._sharedData.entry_data.ProfilePage.shift();b.dataJson=c;!0===b.dataJson.graphql.hashtag.edge_hashtag_to_media.page_info.has_next_page?(b.isNextOn=!0,b.nextId=b.dataJson.graphql.hashtag.edge_hashtag_to_media.page_info.end_cursor):b.isNextOn=!1;b.buildMediaPost(c);1>b.limitRequest&&b.buildTopPostMedia(c);b.onCallNextRequest()})};
g.prototype.findHashtags=function(b){if(!b)return[];result=b.match(RegExp("(?:^|[^a-z\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u00ff\u0100-\u024f\u0253-\u0254\u0256-\u0257\u0259\u025b\u0263\u0268\u026f\u0272\u0289\u028b\u02bb\u0300-\u036f\u1e00-\u1eff\u0400-\u04ff\u0500-\u0527\u2de0-\u2dff\ua640-\ua69f\u0591-\u05bf\u05c1-\u05c2\u05c4-\u05c5\u05c7\u05d0-\u05ea\u05f0-\u05f4\ufb12-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4f\u0610-\u061a\u0620-\u065f\u066e-\u06d3\u06d5-\u06dc\u06de-\u06e8\u06ea-\u06ef\u06fa-\u06fc\u06ff\u0750-\u077f\u08a0\u08a2-\u08ac\u08e4-\u08fe\ufb50-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\u200c\u0e01-\u0e3a\u0e40-\u0e4e\u1100-\u11ff\u3130-\u3185\ua960-\ua97f\uac00-\ud7af\ud7b0-\ud7ff\uffa1-\uffdc\u30a1-\u30fa\u30fc-\u30fe\uff66-\uff9f\uff70\uff21-\uff3a\uff41-\uff5a\u3041-\u3096\u3099-\u309e\u3400-\u4dbf\u4e00-\u9fff\ua700-\ub73f\ub740-\ub81f\uf800-\ufa1f\u3003\u3005\u303b0-9\uff10-\uff19_]+)[#]([a-z\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u00ff\u0100-\u024f\u0253-\u0254\u0256-\u0257\u0259\u025b\u0263\u0268\u026f\u0272\u0289\u028b\u02bb\u0300-\u036f\u1e00-\u1eff\u0400-\u04ff\u0500-\u0527\u2de0-\u2dff\ua640-\ua69f\u0591-\u05bf\u05c1-\u05c2\u05c4-\u05c5\u05c7\u05d0-\u05ea\u05f0-\u05f4\ufb12-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4f\u0610-\u061a\u0620-\u065f\u066e-\u06d3\u06d5-\u06dc\u06de-\u06e8\u06ea-\u06ef\u06fa-\u06fc\u06ff\u0750-\u077f\u08a0\u08a2-\u08ac\u08e4-\u08fe\ufb50-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\u200c\u0e01-\u0e3a\u0e40-\u0e4e\u1100-\u11ff\u3130-\u3185\ua960-\ua97f\uac00-\ud7af\ud7b0-\ud7ff\uffa1-\uffdc\u30a1-\u30fa\u30fc-\u30fe\uff66-\uff9f\uff70\uff21-\uff3a\uff41-\uff5a\u3041-\u3096\u3099-\u309e\u3400-\u4dbf\u4e00-\u9fff\ua700-\ub73f\ub740-\ub81f\uf800-\ufa1f\u3003\u3005\u303b0-9\uff10-\uff19_]*[a-z\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u00ff\u0100-\u024f\u0253-\u0254\u0256-\u0257\u0259\u025b\u0263\u0268\u026f\u0272\u0289\u028b\u02bb\u0300-\u036f\u1e00-\u1eff\u0400-\u04ff\u0500-\u0527\u2de0-\u2dff\ua640-\ua69f\u0591-\u05bf\u05c1-\u05c2\u05c4-\u05c5\u05c7\u05d0-\u05ea\u05f0-\u05f4\ufb12-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4f\u0610-\u061a\u0620-\u065f\u066e-\u06d3\u06d5-\u06dc\u06de-\u06e8\u06ea-\u06ef\u06fa-\u06fc\u06ff\u0750-\u077f\u08a0\u08a2-\u08ac\u08e4-\u08fe\ufb50-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\u200c\u0e01-\u0e3a\u0e40-\u0e4e\u1100-\u11ff\u3130-\u3185\ua960-\ua97f\uac00-\ud7af\ud7b0-\ud7ff\uffa1-\uffdc\u30a1-\u30fa\u30fc-\u30fe\uff66-\uff9f\uff70\uff21-\uff3a\uff41-\uff5a\u3041-\u3096\u3099-\u309e\u3400-\u4dbf\u4e00-\u9fff\ua700-\ub73f\ub740-\ub81f\uf800-\ufa1f\u3003\u3005\u303b]+[a-z\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u00ff\u0100-\u024f\u0253-\u0254\u0256-\u0257\u0259\u025b\u0263\u0268\u026f\u0272\u0289\u028b\u02bb\u0300-\u036f\u1e00-\u1eff\u0400-\u04ff\u0500-\u0527\u2de0-\u2dff\ua640-\ua69f\u0591-\u05bf\u05c1-\u05c2\u05c4-\u05c5\u05c7\u05d0-\u05ea\u05f0-\u05f4\ufb12-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4f\u0610-\u061a\u0620-\u065f\u066e-\u06d3\u06d5-\u06dc\u06de-\u06e8\u06ea-\u06ef\u06fa-\u06fc\u06ff\u0750-\u077f\u08a0\u08a2-\u08ac\u08e4-\u08fe\ufb50-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\u200c\u0e01-\u0e3a\u0e40-\u0e4e\u1100-\u11ff\u3130-\u3185\ua960-\ua97f\uac00-\ud7af\ud7b0-\ud7ff\uffa1-\uffdc\u30a1-\u30fa\u30fc-\u30fe\uff66-\uff9f\uff70\uff21-\uff3a\uff41-\uff5a\u3041-\u3096\u3099-\u309e\u3400-\u4dbf\u4e00-\u9fff\ua700-\ub73f\ub740-\ub81f\uf800-\ufa1f\u3003\u3005\u303b0-9\uff10-\uff19_]*)(?![#a-z\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u00ff\u0100-\u024f\u0253-\u0254\u0256-\u0257\u0259\u025b\u0263\u0268\u026f\u0272\u0289\u028b\u02bb\u0300-\u036f\u1e00-\u1eff\u0400-\u04ff\u0500-\u0527\u2de0-\u2dff\ua640-\ua69f\u0591-\u05bf\u05c1-\u05c2\u05c4-\u05c5\u05c7\u05d0-\u05ea\u05f0-\u05f4\ufb12-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4f\u0610-\u061a\u0620-\u065f\u066e-\u06d3\u06d5-\u06dc\u06de-\u06e8\u06ea-\u06ef\u06fa-\u06fc\u06ff\u0750-\u077f\u08a0\u08a2-\u08ac\u08e4-\u08fe\ufb50-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\u200c\u0e01-\u0e3a\u0e40-\u0e4e\u1100-\u11ff\u3130-\u3185\ua960-\ua97f\uac00-\ud7af\ud7b0-\ud7ff\uffa1-\uffdc\u30a1-\u30fa\u30fc-\u30fe\uff66-\uff9f\uff70\uff21-\uff3a\uff41-\uff5a\u3041-\u3096\u3099-\u309e\u3400-\u4dbf\u4e00-\u9fff\ua700-\ub73f\ub740-\ub81f\uf800-\ufa1f\u3003\u3005\u303b0-9\uff10-\uff19_]+)",
"g"));return result?res=result.map(function(c){c=c.trim().split("#");return"#"+c[1]}):[]};g.prototype.keyWordsGroupCount=function(b){var c=this;b.forEach(function(b,a){c.keyWordsGroupCountValue[b]?c.keyWordsGroupCountValue[b].push(1):c.keyWordsGroupCountValue[b]=[1]})};g.prototype.buildTemplateView=function(){var b=this,c="chart-view-"+(new Date).getTime();this.keyWordsGroupCount(keyContainer);var a=1,d=[];Object.keys(this.keyWordsGroupCountValue.sort()).forEach(function(c,b){d.push({name:c,val:this.keyWordsGroupCountValue[c].length})},
this);d.sort(function(c,b){return b.val-c.val});d.forEach(function(c,d){b.keywordSummery.push({sno:a++,keyword:c.name,key_count:c.val})},this);this.viewData={container:c,title:this.name,"table-summery":this.tblSummery,"key-table-summery":this.keywordSummery,"img-thumbs":this.imgSrcTemplate};this.container.append(Mustache.render(this.template,this.viewData));this.chartOptions={chartId:c,count:this.count,likes:this.like,videos:this.videos,comments:this.comment,keywords:Object.keys(this.keyWordsGroupCountValue).length}};
g.prototype.buildMediaPost=function(b){var c=this;c.name=b.graphql.hashtag.name;c.count=b.graphql.hashtag.edge_hashtag_to_media.count;c.sumOfCount+=parseInt(c.count)||0;$.each(b.graphql.hashtag.edge_hashtag_to_media.edges,function(b,a){c.src=a.node.thumbnail_src;c.caption="N/A";a.node.edge_media_to_caption.edges.length&&(c.caption=a.node.edge_media_to_caption.edges[0].node.text);c.comment+=parseInt(a.node.edge_media_to_comment.count)||0;c.like+=parseInt(a.node.edge_liked_by.count)||0;c.findHashtags(c.caption).forEach(function(b){c.filterKeywords.push(b)},
this)})};g.prototype.buildTopPostMedia=function(b){var c=this;$.each(b.graphql.hashtag.edge_hashtag_to_top_posts.edges,function(b,a){var d=b+1;c.src=a.node.thumbnail_src;c.caption="N/A";a.node.edge_media_to_caption.edges.length&&(c.caption=a.node.edge_media_to_caption.edges[0].node.text);c.comment+=parseInt(a.node.edge_media_to_comment.count)||0;!0===a.node.is_video&&(c.videos+=parseInt(a.node.video_view_count)||0,c.sumOfViews+=parseInt(a.node.video_view_count)||0);c.like+=parseInt(a.node.edge_liked_by.count)||
0;c.findHashtags(c.caption).forEach(function(a){c.filterKeywords.push(a)},this);!0===a.node.is_video?c.imgSrcTemplate.push({img_src:c.src,likes_img:a.node.edge_liked_by.count,comments_img:a.node.edge_media_to_comment.count,video_views:parseInt(a.node.video_view_count)||0}):c.imgSrcTemplate.push({img_src:a.node.thumbnail_src,likes_img:a.node.edge_liked_by.count,comments_img:a.node.edge_media_to_comment.count});c.tblSummery.push({no:d,posts:c.caption,likes_count:a.node.edge_liked_by.count,comments_count:a.node.edge_media_to_comment.count})})};
g.prototype.buildSummarizeCount=function(a){this.sumOfLikes+=this.like;this.sumOfComments+=this.comment;this.sumOfCount+=this.count;this.sumOfPosts+=this.count;this.sumOfTotalViews.text(parseInt(this.sumOfTotalViews.text())+this.sumOfViews);this.sumOfTotalLikes.text(parseInt(this.sumOfTotalLikes.text())+this.sumOfLikes);this.sumOfTotalComments.text(parseInt(this.sumOfTotalComments.text())+this.sumOfComments);this.sumOfTotalShare.text(parseInt(this.sumOfTotalShare.text())+Object.keys(this.keyWordsGroupCountValue).length);
this.sumOfTotalPosts.text(parseInt(this.sumOfTotalPosts.text())+this.sumOfPosts)};g.prototype.onCallNextRequest=function(){this.limitRequest++;this.isNextOn&&this.requestRecursiveCycle&&this.limitRequest<this.maxRequestNo?this.initStart():(this.buildTemplateView(),this.buildSummarizeCount(),this.callback(this.chartOptions))};new a;var h=parseInt(Config.getItem("queryHashtags"))-1,k=parseInt(Config.getItem("queryAccounts"))-1;$(Config.getItem("txtSearch")).on("keypress",function(a){"13"==(a.keyCode?
a.keyCode:a.which)&&(a.preventDefault(),$(Config.getItem("btnSearch")).trigger("click"))});$(Config.getItem("btnSearch")).click(function(b){if(!is_online)return alert(Config.getItem("offlineMsg")),!1;b=$.trim(instagramSessionInput.val());!instagramSessionCookie&&b&&Cookies.set(instaCookieName,b);var c=$(Config.getItem("queryFormTemplate")).html();Mustache.parse(c);var d=$(Config.getItem("searchFormContainer"));if(b=$(Config.getItem("txtSearch")).val()){new a;var f=b.split(" "),n=0,m;$.each(f,function(a,
b){if(0===f[a].indexOf("#")){$(".form-control.insta-url[value='"+b+"']").length||(m=Mustache.render(c,{action:"hashtag",value:b,indicator:"txt-progress-none",input_action:"txt-insta-none",user_indicator:"user-info-none"}));d.append(m);h++;var p={filterKeywords:keyContainer,sumOfTotalViews:$(Config.getItem("lblSumOfVideoViews")),sumOfTotalLikes:$(Config.getItem("lblSumOfTotalLikes")),sumOfTotalComments:$(Config.getItem("lblSumOfTotalComments")),sumOfTotalShare:$(Config.getItem("lblSumOfTotalShare")),
sumOfTotalPosts:$(Config.getItem("lblSumOfTotalPosts")),container:$(Config.getItem("searchFormChartContainer")),keyword:b.replace("#","")||"digitaslbi",template:$(Config.getItem("chartTemplate")).html(),action:"pull_hashtag",callback:e};(new g(p)).initStart()}if(0===f[a].indexOf("@")){Cookies.get(instaCookieName)&&($(".form-control.insta-url[value='"+b+"']").length||(m=Mustache.render(c,{action:"instagram",value:b,indicator:"txt-progress",input_action:"txt-insta",user_indicator:"user-info"})));d.append(m);
k++;if(Cookies.get(instaCookieName)){if($.trim(b)){b=b.replace(/@/,"",b);isFilter=!0;var l=new InstagramAccountSearch;l.currentIndex=n;l.eventHandler("Fetching data, please wait....");l.initNow(null,{keyword:b,request_action:"pull_account",next:"false",sessionid:Config.getItem("session_key")}).done(function(a){l.stateError&&(l.currentIndexPost=1,l.eventHandler("Error in Instagram profile link, wrong link","label-danger"))})}}else console.info(Config.getItem("sessionError"));n++}});Config.setItem("queryHashtags",
h);Config.setItem("queryAccounts",k);$(Config.getItem("lblCountSearchHashtags")).html(h);$(Config.getItem("lblCountSearchAccounts")).html(k)}})});
